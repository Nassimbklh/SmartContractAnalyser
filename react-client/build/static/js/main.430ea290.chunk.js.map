{"version":3,"sources":["contexts/AuthContext.js","services/api.js","utils/utils.js","components/Login.js","components/Register.js","components/Analyze.js","components/Navbar.js","components/History.js","App.js","reportWebVitals.js","index.js"],"names":["AuthContext","createContext","AuthProvider","_ref","children","token","setToken","useState","localStorage","getItem","React","createElement","Provider","value","login","newToken","setItem","logout","removeItem","BACKEND_URL","process","REACT_APP_API_URL","console","log","api","axios","create","baseURL","headers","Content-Type","Accept","withCredentials","interceptors","request","use","config","Authorization","error","Promise","reject","authAPI","credentials","post","register","userData","contractAPI","analyze","formData","responseType","getHistory","get","getReport","wallet","filename","feedbackAPI","submitFeedback","feedbackData","getUserFromToken","base64","split","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","downloadBlob","blob","url","window","URL","createObjectURL","a","document","href","download","click","revokeObjectURL","handleApiError","response","data","status","statusText","message","Login","useContext","navigate","useNavigate","form","setForm","password","setMessage","handleChange","e","[object Object]","target","name","className","style","maxWidth","onSubmit","async","preventDefault","res","access_token","placeholder","onChange","required","type","technicalQuestions","question","options","text","isCorrect","getTechnicalLevel","score","Register","step","setStep","answers","setAnswers","Array","length","fill","messageType","setMessageType","handleCredentialsSubmit","startsWith","handleAssessmentSubmit","technicalScore","calculateScore","forEach","answer","index","technicalLevel","technical_score","technical_level","setTimeout","errorMessage","q","qIndex","key","option","oIndex","id","checked","handleAnswerChange","questionIndex","optionIndex","newAnswers","htmlFor","onClick","disabled","includes","Analyze","code","setCode","file","setFile","reportContent","setReportContent","downloadUrl","setDownloadUrl","setError","loading","setLoading","reportId","setReportId","feedbackStatus","setFeedbackStatus","feedbackComment","setFeedbackComment","feedbackSubmitted","setFeedbackSubmitted","feedbackLoading","setFeedbackLoading","feedbackError","setFeedbackError","trim","FormData","append","historyRes","latestReport","historyError","blobUrl","Blob","rows","accept","files","role","report_id","comment","Fragment","aria-hidden","Navbar","Link","to","aria-label","handleLogout","History","history","setHistory","submitting","setSubmitting","useEffect","then","catch","err","handleFeedback","prevHistory","item","feedback","code_result","finally","date","alert","handleDownload","ProtectedRoute","Navigate","App","Router","Routes","Route","path","element","reportWebVitals","onPerfEntry","Function","__webpack_require__","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.430ea290.chunk.js","sourcesContent":["import React, { createContext, useState } from \"react\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\r\n\r\n  const login = (newToken) => {\r\n    localStorage.setItem(\"token\", newToken);\r\n    setToken(newToken);\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    setToken(null);\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ token, login, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n","import axios from 'axios';\r\n\r\n// Get the API URL from environment variables\r\nconst BACKEND_URL = process.env.REACT_APP_API_URL || \"/api\";\r\nconsole.log(\"REACT_APP_API_URL ➡️\", BACKEND_URL);\r\n\r\n// Create axios instance with default config\r\nconst api = axios.create({\r\n  baseURL: BACKEND_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Accept': 'application/json',\r\n  },\r\n  withCredentials: false,  // Changed to false to match CORS configuration\r\n});\r\n\r\n// Add request interceptor to add auth token to requests\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// Auth API\r\nexport const authAPI = {\r\n  login: (credentials) => api.post('/auth/login', credentials),\r\n  register: (userData) => api.post('/auth/register', userData),\r\n};\r\n\r\n// Contract API\r\nexport const contractAPI = {\r\n  analyze: (formData) => api.post('/analyze', formData, {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n    },\r\n    responseType: 'text',\r\n  }),\r\n  getHistory: () => api.get('/history'),\r\n  getReport: (wallet, filename) => api.get(`/report/${wallet}/${filename}`, {\r\n    responseType: 'blob',\r\n  }),\r\n};\r\n\r\n// Feedback API\r\nexport const feedbackAPI = {\r\n  submitFeedback: (feedbackData) => api.post('/feedback', feedbackData),\r\n};\r\n\r\nexport default api;\r\n","/**\r\n * Utility functions for the application\r\n */\r\n\r\n/**\r\n * Extract user information from JWT token\r\n * @param {string} token - JWT token\r\n * @returns {object} User information\r\n */\r\nexport const getUserFromToken = (token) => {\r\n  if (!token) return null;\r\n  try {\r\n    // JWT tokens are in format: header.payload.signature\r\n    // We need the payload part\r\n    const base64Url = token.split('.')[1];\r\n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n    const jsonPayload = decodeURIComponent(\r\n      atob(base64)\r\n        .split('')\r\n        .map((c) => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))\r\n        .join('')\r\n    );\r\n    return JSON.parse(jsonPayload);\r\n  } catch (error) {\r\n    console.error('Error parsing token:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Format date string\r\n * @param {string} dateString - Date string\r\n * @returns {string} Formatted date\r\n */\r\nexport const formatDate = (dateString) => {\r\n  const date = new Date(dateString);\r\n  return date.toLocaleString();\r\n};\r\n\r\n/**\r\n * Download a blob as a file\r\n * @param {Blob} blob - The blob to download\r\n * @param {string} filename - The name of the file to download\r\n */\r\nexport const downloadBlob = (blob, filename) => {\r\n  const url = window.URL.createObjectURL(blob);\r\n  const a = document.createElement(\"a\");\r\n  a.href = url;\r\n  a.download = filename;\r\n  a.click();\r\n  window.URL.revokeObjectURL(url);\r\n};\r\n\r\n/**\r\n * Handle API errors and return a user-friendly error message\r\n * @param {Error} error - The error object from the API call\r\n * @returns {string} A user-friendly error message\r\n */\r\nexport const handleApiError = (error) => {\r\n  if (error.response) {\r\n    // The request was made and the server responded with a status code\r\n    // that falls out of the range of 2xx\r\n    if (error.response.data && error.response.data.error) {\r\n      return error.response.data.error;\r\n    }\r\n    return `Erreur ${error.response.status}: ${error.response.statusText}`;\r\n  } else if (error.request) {\r\n    // The request was made but no response was received\r\n    return \"Pas de réponse du serveur. Vérifiez votre connexion.\";\r\n  } else {\r\n    // Something happened in setting up the request that triggered an Error\r\n    return error.message || \"Une erreur inconnue s'est produite\";\r\n  }\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport { AuthContext } from \"../contexts/AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { authAPI } from \"../services/api\";\r\nimport { handleApiError } from \"../utils/utils\";\r\n\r\nfunction Login() {\r\n  const { login } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n  const [form, setForm] = useState({ wallet: \"\", password: \"\" });\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await authAPI.login(form);\r\n      login(res.data.data.access_token);\r\n      navigate(\"/analyze\");\r\n    } catch (error) {\r\n      setMessage(`❌ ${handleApiError(error) || \"Adresse ou mot de passe invalide\"}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center align-items-center bg-light vh-100\">\r\n      <div className=\"card shadow-lg p-4 w-100\" style={{ maxWidth: \"400px\" }}>\r\n        <h2 className=\"text-center mb-4\">Connexion</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-3\">\r\n            <label className=\"form-label\">Adresse de portefeuille</label>\r\n            <input\r\n              className=\"form-control\"\r\n              name=\"wallet\"\r\n              placeholder=\"0x...\"\r\n              value={form.wallet}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label className=\"form-label\">Mot de passe</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              name=\"password\"\r\n              placeholder=\"Mot de passe\"\r\n              value={form.password}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-primary w-100\">➡Se connecter</button>\r\n        </form>\r\n        {message && <div className=\"alert alert-danger mt-3 text-center\">{message}</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { authAPI } from \"../services/api\";\r\nimport { handleApiError } from \"../utils/utils\";\r\n\r\n// Questions techniques pour l'évaluation\r\nconst technicalQuestions = [\r\n  {\r\n    question: \"Que fait la fonction fallback() en Solidity ?\",\r\n    options: [\r\n      { text: \"Elle exécute automatiquement un transfert ETH\", isCorrect: false },\r\n      { text: \"Elle est appelée quand aucune autre fonction ne correspond\", isCorrect: true },\r\n      { text: \"Elle initialise le contrat\", isCorrect: false },\r\n      { text: \"Elle supprime le contrat\", isCorrect: false }\r\n    ]\r\n  },\r\n  {\r\n    question: \"Quel est le problème principal du pattern call.value() ?\",\r\n    options: [\r\n      { text: \"Manque de lisibilité\", isCorrect: false },\r\n      { text: \"Ralentit la transaction\", isCorrect: false },\r\n      { text: \"Vulnérabilité à la réentrance\", isCorrect: true },\r\n      { text: \"Pas compatible avec MetaMask\", isCorrect: false }\r\n    ]\r\n  },\r\n  {\r\n    question: \"Le mot-clé view dans une fonction Solidity signifie que :\",\r\n    options: [\r\n      { text: \"Elle modifie l'état du contrat\", isCorrect: false },\r\n      { text: \"Elle ne retourne rien\", isCorrect: false },\r\n      { text: \"Elle peut seulement lire l'état\", isCorrect: true },\r\n      { text: \"Elle est privée\", isCorrect: false }\r\n    ]\r\n  },\r\n  {\r\n    question: \"Que retourne msg.sender dans une fonction appelée via un proxy ?\",\r\n    options: [\r\n      { text: \"L'adresse du proxy\", isCorrect: false },\r\n      { text: \"L'adresse du wallet qui initie la transaction\", isCorrect: true },\r\n      { text: \"Toujours l'adresse 0x0\", isCorrect: false },\r\n      { text: \"Le compilateur choisit aléatoirement\", isCorrect: false }\r\n    ]\r\n  },\r\n  {\r\n    question: \"Pourquoi utilise-t-on require() en Solidity ?\",\r\n    options: [\r\n      { text: \"Pour compiler un contrat\", isCorrect: false },\r\n      { text: \"Pour conditionner l'exécution d'une fonction\", isCorrect: true },\r\n      { text: \"Pour créer une boucle\", isCorrect: false },\r\n      { text: \"Pour envoyer des tokens\", isCorrect: false }\r\n    ]\r\n  }\r\n];\r\n\r\n// Fonction pour déterminer le niveau technique en fonction du score\r\nconst getTechnicalLevel = (score) => {\r\n  if (score <= 1) return \"débutant\";\r\n  if (score === 2) return \"intermédiaire bas\";\r\n  if (score === 3) return \"intermédiaire\";\r\n  if (score === 4) return \"avancé\";\r\n  return \"expert\";\r\n};\r\n\r\nfunction Register() {\r\n  const navigate = useNavigate();\r\n  const [step, setStep] = useState(\"credentials\"); // credentials, assessment, success\r\n  const [form, setForm] = useState({ wallet: \"\", password: \"\" });\r\n  const [answers, setAnswers] = useState(Array(technicalQuestions.length).fill(null));\r\n  const [message, setMessage] = useState(\"\");\r\n  const [messageType, setMessageType] = useState(\"info\"); // info / success / danger\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleAnswerChange = (questionIndex, optionIndex) => {\r\n    const newAnswers = [...answers];\r\n    newAnswers[questionIndex] = optionIndex;\r\n    setAnswers(newAnswers);\r\n  };\r\n\r\n  const handleCredentialsSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    // 🔎 Vérifications côté front\r\n    if (!form.wallet.startsWith(\"0x\") || form.wallet.length !== 42) {\r\n      setMessage(\"❌ L'adresse doit être un wallet Ethereum valide (0x...)\");\r\n      setMessageType(\"danger\");\r\n      return;\r\n    }\r\n    if (form.password.length < 8) {\r\n      setMessage(\"❌ Le mot de passe doit contenir au moins 8 caractères\");\r\n      setMessageType(\"danger\");\r\n      return;\r\n    }\r\n\r\n    // Passer à l'étape d'évaluation technique\r\n    setMessage(\"\");\r\n    setStep(\"assessment\");\r\n  };\r\n\r\n  const calculateScore = () => {\r\n    let score = 0;\r\n    answers.forEach((answer, index) => {\r\n      if (answer !== null && technicalQuestions[index].options[answer].isCorrect) {\r\n        score += 1;\r\n      }\r\n    });\r\n    return score;\r\n  };\r\n\r\n  const handleAssessmentSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // Calculer le score et le niveau\r\n    const technicalScore = calculateScore();\r\n    const technicalLevel = getTechnicalLevel(technicalScore);\r\n\r\n    try {\r\n      // Envoyer les données au backend\r\n      await authAPI.register({\r\n        ...form,\r\n        technical_score: technicalScore,\r\n        technical_level: technicalLevel\r\n      });\r\n\r\n      setMessage(`✅ Inscription réussie ! Votre niveau technique : ${technicalLevel} (${technicalScore}/5)`);\r\n      setMessageType(\"success\");\r\n      setStep(\"success\");\r\n      setTimeout(() => navigate(\"/login\"), 3000);\r\n    } catch (error) {\r\n      const errorMessage = handleApiError(error) || \"❌ Erreur lors de l'inscription\";\r\n      setMessage(errorMessage);\r\n      setMessageType(\"danger\");\r\n    }\r\n  };\r\n\r\n  // Affichage du formulaire d'identifiants\r\n  if (step === \"credentials\") {\r\n    return (\r\n      <div className=\"d-flex justify-content-center align-items-center bg-light vh-100\">\r\n        <div className=\"card shadow-lg p-4 w-100\" style={{ maxWidth: \"400px\" }}>\r\n          <h2 className=\"text-center mb-4\"> Inscription</h2>\r\n          <form onSubmit={handleCredentialsSubmit}>\r\n            <div className=\"mb-3\">\r\n              <label className=\"form-label\">Adresse de portefeuille</label>\r\n              <input\r\n                className=\"form-control\"\r\n                name=\"wallet\"\r\n                placeholder=\"0x...\"\r\n                value={form.wallet}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label className=\"form-label\">Mot de passe</label>\r\n              <input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                placeholder=\"Mot de passe (min. 8 caractères)\"\r\n                name=\"password\"\r\n                value={form.password}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-primary w-100\">Continuer</button>\r\n          </form>\r\n          {message && (\r\n            <div className={`alert alert-${messageType} mt-3 text-center`}>\r\n              {message}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Affichage du questionnaire technique\r\n  if (step === \"assessment\") {\r\n    return (\r\n      <div className=\"d-flex justify-content-center align-items-center bg-light min-vh-100 py-5\">\r\n        <div className=\"card shadow-lg p-4 w-100\" style={{ maxWidth: \"600px\" }}>\r\n          <h2 className=\"text-center mb-4\">Évaluation technique</h2>\r\n          <p className=\"text-center mb-4\">Répondez aux 5 questions suivantes pour évaluer votre niveau en smart contracts Solidity et sécurité blockchain.</p>\r\n\r\n          <form onSubmit={handleAssessmentSubmit}>\r\n            {technicalQuestions.map((q, qIndex) => (\r\n              <div key={qIndex} className=\"mb-4\">\r\n                <h5>{qIndex + 1}. {q.question}</h5>\r\n                <div className=\"mt-2\">\r\n                  {q.options.map((option, oIndex) => (\r\n                    <div key={oIndex} className=\"form-check mb-2\">\r\n                      <input\r\n                        className=\"form-check-input\"\r\n                        type=\"radio\"\r\n                        name={`question-${qIndex}`}\r\n                        id={`q${qIndex}-option${oIndex}`}\r\n                        checked={answers[qIndex] === oIndex}\r\n                        onChange={() => handleAnswerChange(qIndex, oIndex)}\r\n                        required\r\n                      />\r\n                      <label className=\"form-check-label\" htmlFor={`q${qIndex}-option${oIndex}`}>\r\n                        {option.text}\r\n                      </label>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ))}\r\n\r\n            <div className=\"d-flex justify-content-between mt-4\">\r\n              <button \r\n                type=\"button\" \r\n                className=\"btn btn-secondary\" \r\n                onClick={() => setStep(\"credentials\")}\r\n              >\r\n                Retour\r\n              </button>\r\n              <button \r\n                type=\"submit\" \r\n                className=\"btn btn-success\"\r\n                disabled={answers.includes(null)}\r\n              >\r\n                Terminer l'inscription\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Affichage du message de succès\r\n  return (\r\n    <div className=\"d-flex justify-content-center align-items-center bg-light vh-100\">\r\n      <div className=\"card shadow-lg p-4 w-100\" style={{ maxWidth: \"400px\" }}>\r\n        <h2 className=\"text-center mb-4\">Inscription terminée</h2>\r\n        {message && (\r\n          <div className={`alert alert-${messageType} mt-3 text-center`}>\r\n            {message}\r\n          </div>\r\n        )}\r\n        <p className=\"text-center\">Redirection vers la page de connexion...</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React, { useState/*, useContext*/ } from \"react\";\r\n/*import { AuthContext } from \"../contexts/AuthContext\";*/\r\nimport { contractAPI, feedbackAPI } from \"../services/api\";\r\nimport { /*downloadBlob,*/ handleApiError } from \"../utils/utils\";\r\n\r\nfunction Analyze() {\r\n  const [code, setCode] = useState(\"\");\r\n  const [file, setFile] = useState(null);\r\n  const [reportContent, setReportContent] = useState(\"\");\r\n  const [downloadUrl, setDownloadUrl] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [reportId, setReportId] = useState(null);\r\n  const [feedbackStatus, setFeedbackStatus] = useState(\"\");\r\n  const [feedbackComment, setFeedbackComment] = useState(\"\");\r\n  const [feedbackSubmitted, setFeedbackSubmitted] = useState(false);\r\n  const [feedbackLoading, setFeedbackLoading] = useState(false);\r\n  const [feedbackError, setFeedbackError] = useState(\"\");\r\n  //const { token } = useContext(AuthContext);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setReportContent(\"\");\r\n    setDownloadUrl(null);\r\n    setReportId(null);\r\n    setFeedbackStatus(\"\");\r\n    setFeedbackComment(\"\");\r\n    setFeedbackSubmitted(false);\r\n    setFeedbackError(\"\");\r\n    setLoading(true);\r\n\r\n    if (file && code.trim()) {\r\n      setError(\"❗Choisissez soit un fichier, soit du code, pas les deux\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (!file && !code.trim()) {\r\n      setError(\"❗Fournissez un fichier ou du code à analyser\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    if (file) formData.append(\"file\", file);\r\n    if (code.trim()) formData.append(\"code\", code);\r\n\r\n    try {\r\n      const res = await contractAPI.analyze(formData);\r\n\r\n      // res.data is already a string when responseType is 'text'\r\n      const text = res.data;\r\n      setReportContent(text);\r\n\r\n      // Get the latest report ID from history\r\n      try {\r\n        const historyRes = await contractAPI.getHistory();\r\n        if (historyRes.data && historyRes.data.data && historyRes.data.data.length > 0) {\r\n          // Use the ID of the most recent report (first in the list)\r\n          const latestReport = historyRes.data.data[0];\r\n          setReportId(latestReport.id);\r\n        }\r\n      } catch (historyError) {\r\n        console.error(\"Failed to fetch report ID from history:\", historyError);\r\n        setFeedbackError(\"Impossible de récupérer l'ID du rapport. Le feedback pourrait ne pas fonctionner correctement.\");\r\n      }\r\n\r\n      const blobUrl = window.URL.createObjectURL(new Blob([text], { type: \"text/plain\" }));\r\n      setDownloadUrl(blobUrl);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setError(`Erreur lors de l'analyse: ${handleApiError(error)}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFeedbackSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setFeedbackError(\"\");\r\n    setFeedbackLoading(true);\r\n\r\n    if (!feedbackStatus) {\r\n      setFeedbackError(\"Veuillez sélectionner une option (valide ou invalide)\");\r\n      setFeedbackLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (!reportId) {\r\n      setFeedbackError(\"Impossible d'envoyer le feedback: ID du rapport manquant\");\r\n      setFeedbackLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await feedbackAPI.submitFeedback({\r\n        report_id: reportId,\r\n        status: feedbackStatus,\r\n        comment: feedbackComment\r\n      });\r\n\r\n      setFeedbackSubmitted(true);\r\n    } catch (error) {\r\n      console.error(error);\r\n      const errorMessage = handleApiError(error);\r\n\r\n      // Check if the error is due to already submitted feedback\r\n      if (errorMessage.includes(\"déjà donné votre avis\") || errorMessage.includes(\"already submitted\")) {\r\n        setFeedbackError(\"Vous avez déjà donné votre avis sur ce rapport.\");\r\n        setFeedbackSubmitted(true); // Treat as submitted to disable the form\r\n      } else {\r\n        setFeedbackError(`Erreur lors de l'envoi du feedback: ${errorMessage}`);\r\n      }\r\n    } finally {\r\n      setFeedbackLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2>Analyse de Smart Contract Solidity</h2>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <label className=\"form-label mt-3\">Coller le code :</label>\r\n        <textarea\r\n          className=\"form-control\"\r\n          placeholder={`// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.0;\\n\\ncontract Example {\\n    uint256 public value;\\n    function setValue(uint256 _value) public {\\n        value = _value;\\n    }\\n}`}\r\n          rows=\"10\"\r\n          value={code}\r\n          onChange={(e) => {\r\n            setCode(e.target.value);\r\n            setFile(null); // reset fichier si code saisi\r\n          }}\r\n        ></textarea>\r\n\r\n        <div className=\"text-center my-3\">— ou —</div>\r\n\r\n        <label className=\"form-label\">Fichier .sol :</label>\r\n        <input\r\n          type=\"file\"\r\n          accept=\".sol\"\r\n          className=\"form-control\"\r\n          onChange={(e) => {\r\n            setFile(e.target.files[0]);\r\n            setCode(\"\"); // vide le code si fichier choisi\r\n          }}\r\n        />\r\n\r\n        <button type=\"submit\" className=\"btn btn-primary mt-3\" disabled={loading}>\r\n          Lancer l'analyse\r\n        </button>\r\n      </form>\r\n\r\n      {/* Spinner pendant chargement */}\r\n      {loading && (\r\n        <div className=\"d-flex justify-content-center mt-3\">\r\n          <div className=\"spinner-border text-primary\" role=\"status\">\r\n            <span className=\"visually-hidden\">Chargement...</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Message d’erreur */}\r\n      {error && <div className=\"alert alert-danger mt-3\">{error}</div>}\r\n\r\n      {/* Résultat */}\r\n      {reportContent && (\r\n        <div className=\"mt-4 mb-4 flex flex-column\">\r\n          <h4 className=\"mb-2\">Résultat de l’analyse :</h4>\r\n          <pre className=\"bg-light p-3 rounded border max-h-96 overflow-auto\">\r\n            {reportContent}\r\n          </pre>\r\n\r\n          {downloadUrl && (\r\n            <div className=\"d-flex justify-content-center mt-3\">\r\n              <a\r\n                href={downloadUrl}\r\n                download=\"rapport.txt\"\r\n                className=\"btn btn-success\"\r\n              >\r\n                Télécharger le rapport\r\n              </a>\r\n            </div>\r\n          )}\r\n\r\n          {/* Feedback */}\r\n          {reportId && !feedbackSubmitted ? (\r\n            <div className=\"mt-4 p-4 border rounded bg-light\">\r\n              <h4 className=\"mb-3\">Votre avis sur ce rapport :</h4>\r\n\r\n              <form onSubmit={handleFeedbackSubmit}>\r\n                <div className=\"mb-3\">\r\n                  <div className=\"d-flex gap-3\">\r\n                    <button\r\n                      type=\"button\"\r\n                      className={`btn ${feedbackStatus === \"OK\" ? \"btn-success\" : \"btn-outline-success\"}`}\r\n                      onClick={() => setFeedbackStatus(\"OK\")}\r\n                    >\r\n                      Résultat valide\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      className={`btn ${feedbackStatus === \"KO\" ? \"btn-danger\" : \"btn-outline-danger\"}`}\r\n                      onClick={() => setFeedbackStatus(\"KO\")}\r\n                    >\r\n                      Résultat invalide\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"feedbackComment\" className=\"form-label\">Laissez un commentaire (optionnel) :</label>\r\n                  <textarea\r\n                    id=\"feedbackComment\"\r\n                    className=\"form-control\"\r\n                    rows=\"3\"\r\n                    value={feedbackComment}\r\n                    onChange={(e) => setFeedbackComment(e.target.value)}\r\n                  ></textarea>\r\n                </div>\r\n\r\n                {feedbackError && (\r\n                  <div className=\"alert alert-danger\">{feedbackError}</div>\r\n                )}\r\n\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"btn btn-primary\"\r\n                  disabled={feedbackLoading}\r\n                >\r\n                  {feedbackLoading ? (\r\n                    <>\r\n                      <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                      Envoi en cours...\r\n                    </>\r\n                  ) : (\r\n                    \"Envoyer mon avis\"\r\n                  )}\r\n                </button>\r\n              </form>\r\n            </div>\r\n          ) : reportId && feedbackSubmitted ? (\r\n            <div className=\"mt-4 p-4 border rounded bg-light\">\r\n              <div className=\"alert alert-success mb-0\">\r\n                <h5 className=\"alert-heading\">Merci pour votre retour !</h5>\r\n                <p className=\"mb-0\">Votre avis a bien été pris en compte.</p>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Analyze;\r\n","import React, { useContext } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { AuthContext } from \"../contexts/AuthContext\";\r\n\r\nfunction Navbar() {\r\n  const { token, logout } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <nav className=\"navbar navbar-expand-lg navbar-light bg-light shadow-sm\">\r\n      <div className=\"container\">\r\n        {/* 🔗 Le nom du site redirige vers /analyze */}\r\n        <Link to=\"/analyze\" className=\"navbar-brand d-flex align-items-center text-decoration-none\">\r\n          <span className=\"me-2\" role=\"img\" aria-label=\"lock\">🔐</span>\r\n          <strong className=\"text-dark\">SmartContractAnalyser</strong>\r\n        </Link>\r\n\r\n        {token ? (\r\n          <div className=\"d-flex\">\r\n            <Link to=\"/history\" className=\"btn btn-outline-secondary\">\r\n              Historique\r\n            </Link>\r\n            <button onClick={handleLogout} className=\"btn btn-outline-danger ms-2\">\r\n              Déconnexion\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"d-flex\">\r\n            <Link to=\"/login\" className=\"btn btn-outline-primary me-2\">Connexion</Link>\r\n            <Link to=\"/register\" className=\"btn btn-outline-success\">Inscription</Link>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { AuthContext } from \"../contexts/AuthContext\";\r\nimport { contractAPI, feedbackAPI } from \"../services/api\";\r\nimport { getUserFromToken, downloadBlob, handleApiError } from \"../utils/utils\";\r\n\r\nfunction History() {\r\n  const { token } = useContext(AuthContext);\r\n  const [history, setHistory] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n\r\n    contractAPI.getHistory()\r\n      .then(res => {\r\n        if (res.data && res.data.data) {\r\n          setHistory(res.data.data);\r\n        } else {\r\n          setHistory([]);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        setError(`Erreur lors du chargement de l'historique: ${handleApiError(err)}`);\r\n      });\r\n  }, [token]);\r\n\r\n  const handleDownload = (filename) => {\r\n    const userData = getUserFromToken(token);\r\n    if (!userData || !userData.wallet) {\r\n      alert(\"Erreur: Impossible d'extraire les informations utilisateur du token\");\r\n      return;\r\n    }\r\n\r\n    contractAPI.getReport(userData.wallet, filename)\r\n      .then(res => {\r\n        downloadBlob(res.data, `${filename}.md`);\r\n      })\r\n      .catch(error => {\r\n        alert(`Erreur lors du téléchargement: ${handleApiError(error)}`);\r\n      });\r\n  };\r\n\r\n  const handleFeedback = (reportId, status) => {\r\n    if (submitting) return;\r\n\r\n    setSubmitting(true);\r\n    setError(\"\"); // Clear any previous errors\r\n\r\n    const feedbackData = {\r\n      report_id: reportId,\r\n      status: status // \"OK\" or \"KO\"\r\n    };\r\n\r\n    feedbackAPI.submitFeedback(feedbackData)\r\n      .then(res => {\r\n        // Update the history item with the new feedback\r\n        setHistory(prevHistory => \r\n          prevHistory.map(item => \r\n            item.id === reportId \r\n              ? { \r\n                  ...item, \r\n                  feedback: { \r\n                    status: status, \r\n                    code_result: status === \"OK\" ? 1 : 0,\r\n                    comment: null \r\n                  } \r\n                } \r\n              : item\r\n          )\r\n        );\r\n      })\r\n      .catch(error => {\r\n        const errorMessage = handleApiError(error);\r\n\r\n        // Check if the error is due to already submitted feedback\r\n        if (errorMessage.includes(\"déjà donné votre avis\") || errorMessage.includes(\"already submitted\")) {\r\n          // Refresh the history to get the latest feedback data\r\n          contractAPI.getHistory()\r\n            .then(res => {\r\n              if (res.data && res.data.data) {\r\n                setHistory(res.data.data);\r\n              }\r\n            })\r\n            .catch(err => {\r\n              setError(`Erreur lors du rafraîchissement de l'historique: ${handleApiError(err)}`);\r\n            });\r\n        } else {\r\n          setError(`Erreur lors de l'envoi du feedback: ${errorMessage}`);\r\n        }\r\n      })\r\n      .finally(() => {\r\n        setSubmitting(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2>Historique des analyses</h2>\r\n\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n      {history.length === 0 && <p>Aucun rapport pour l’instant.</p>}\r\n\r\n      <ul className=\"list-group mt-3\">\r\n        {history.map((item, index) => (\r\n          <li key={index} className=\"list-group-item\">\r\n            <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n              <span>\r\n                {item.date} — <strong>{item.filename}</strong> — {item.status}\r\n              </span>\r\n              <button\r\n                className=\"btn btn-outline-primary\"\r\n                onClick={() => handleDownload(item.filename)}\r\n              >\r\n                Télécharger\r\n              </button>\r\n            </div>\r\n\r\n            {/* Feedback section */}\r\n            <div className=\"mt-2\">\r\n              {item.feedback ? (\r\n                <div className=\"alert alert-info\">\r\n                  <strong>\r\n                    {item.feedback.status === \"OK\" ? \"OK\" : \"KO\"}\r\n                  </strong>\r\n                  {item.feedback.comment && (\r\n                    <span> — {item.feedback.comment}</span>\r\n                  )}\r\n                  <div className=\"mt-1\">Feedback déjà envoyé</div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"d-flex gap-2\">\r\n                  <button\r\n                    className=\"btn btn-sm btn-success\"\r\n                    onClick={() => handleFeedback(item.id, \"OK\")}\r\n                    disabled={submitting}\r\n                  >\r\n                    Correct\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-sm btn-danger\"\r\n                    onClick={() => handleFeedback(item.id, \"KO\")}\r\n                    disabled={submitting}\r\n                  >\r\n                    Incorrect\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default History;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\r\nimport { AuthProvider, AuthContext } from \"./contexts/AuthContext\";\r\nimport Login from \"./components/Login\";\r\nimport Register from \"./components/Register\";\r\nimport Analyze from \"./components/Analyze\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport History from \"./components/History\";\r\n\r\nfunction ProtectedRoute({ children }) {\r\n  const { token } = React.useContext(AuthContext);\r\n  return token ? children : <Navigate to=\"/login\" />;\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <AuthProvider>\r\n      <Router>\r\n        <Navbar /> {/* ⬅️ Affiché en haut */}\r\n        <Routes>\r\n          <Route path=\"/login\" element={<Login />} />\r\n          <Route path=\"/register\" element={<Register />} />\r\n          <Route path=\"/analyze\" element={<ProtectedRoute><Analyze /></ProtectedRoute> } />\r\n            <Route path=\"/history\" element={<ProtectedRoute><History /></ProtectedRoute>} />\r\n          <Route path=\"*\" element={<Navigate to=\"/login\" />} />\r\n        </Routes>\r\n      </Router>\r\n    </AuthProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById('root'));\r\nroot.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}